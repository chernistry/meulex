# Meulex Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Core Service Configuration
# =============================================================================
SERVICE_NAME=meulex
SERVICE_VERSION=0.1.0
ENVIRONMENT=development
DEBUG=true

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1

# =============================================================================
# LLM Provider Configuration
# =============================================================================
# Primary LLM Provider (OpenAI-compatible)
LLM_PROVIDER=openai
LLM_MODEL=gpt-3.5-turbo
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_ORGANIZATION=

# Fallback LLM Provider (Ollama)
FALLBACK_LLM_PROVIDER=ollama
FALLBACK_LLM_MODEL=llama2
OLLAMA_BASE_URL=http://localhost:11434

# LLM Configuration
MAX_TOKENS=2048
REQUEST_TIMEOUT_S=30
RETRY_ATTEMPTS=3
COST_BUDGET_CENTS=1000
TEMPERATURE=0.7

# =============================================================================
# Embeddings Configuration
# =============================================================================
EMBEDDER_NAME=jina
JINA_API_KEY=your_jina_api_key_here
JINA_MODEL=jina-embeddings-v2-base-en
EMBEDDING_DIMENSION=768
EMBEDDING_BATCH_SIZE=64

# =============================================================================
# Vector Store Configuration
# =============================================================================
VECTOR_STORE=qdrant
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
COLLECTION_NAME=meulex_docs
VECTOR_SIZE=768

# =============================================================================
# Caching Configuration
# =============================================================================
REDIS_URL=redis://localhost:6379/0
CACHE_TTL_SECONDS=3600
SEMANTIC_CACHE_TTL_SECONDS=1800
ENABLE_CACHE=true

# =============================================================================
# Retrieval Configuration
# =============================================================================
# Hybrid Retrieval
ENABLE_HYBRID_RETRIEVAL=true
ENABLE_SPARSE_RETRIEVAL=true
RRF_K=60
DENSE_WEIGHT=0.7
SPARSE_WEIGHT=0.3

# Retrieval Parameters
DEFAULT_TOP_K=3
MAX_TOP_K=20
CHUNK_SIZE=512
CHUNK_OVERLAP=64

# Reranking
ENABLE_RERANKER=false
RERANKER_MODEL=jina-reranker-v1-base-en
RERANKER_TOP_K=5

# =============================================================================
# Slack Integration
# =============================================================================
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_SIGNING_SECRET=your-slack-signing-secret
SLACK_APP_TOKEN=xapp-your-slack-app-token
SLACK_VERIFICATION_TOKEN=your-slack-verification-token

# =============================================================================
# Security Configuration
# =============================================================================
# Rate Limiting
RATE_LIMITS_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# Security Headers
ENABLE_SECURITY_HEADERS=true
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8000"]
CORS_ALLOW_CREDENTIALS=true

# Metrics Protection
METRICS_PROTECTED=false
METRICS_TOKEN=your_metrics_token_here

# =============================================================================
# Observability Configuration
# =============================================================================
# Metrics
METRICS_ENABLED=true
PROMETHEUS_PORT=8001

# Tracing
TRACING_ENABLED=true
OTEL_SERVICE_NAME=meulex
OTEL_SERVICE_VERSION=0.1.0
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Langfuse
LANGFUSE_ENABLED=false
LANGFUSE_SECRET_KEY=your_langfuse_secret_key
LANGFUSE_PUBLIC_KEY=your_langfuse_public_key
LANGFUSE_HOST=http://localhost:3000

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_LOG_SANITIZATION=true

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_STREAMING=false
ENABLE_PII_MASKING=true
ENABLE_CIRCUIT_BREAKER=true
ENABLE_BUDGET_ENFORCEMENT=true

# =============================================================================
# Ingestion Configuration
# =============================================================================
# Prefect
PREFECT_API_URL=http://localhost:4200/api
PREFECT_LOGGING_LEVEL=INFO

# Document Processing
SUPPORTED_FILE_TYPES=["txt", "md", "pdf", "docx", "html"]
MAX_FILE_SIZE_MB=10
MAX_CONTENT_LENGTH=50000

# =============================================================================
# Development Configuration
# =============================================================================
# Mock Services (for development without API keys)
USE_MOCK_LLM=false
USE_MOCK_EMBEDDINGS=false
USE_MOCK_RERANKER=false

# Testing
TEST_COLLECTION_NAME=meulex_test_docs
TEST_REDIS_DB=1
